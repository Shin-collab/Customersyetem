<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KYC | GSB Portal</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@100;300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* --- [ส่วนที่กุแก้: สีตามธีมที่พี่ชอบ] --- */
        :root { 
            --pk: #eb008b; 
            --bg: #040508; /* เปลี่ยนพื้นหลังให้เข้มมีมิติ */
            --cd: rgba(255, 255, 255, 0.02); /* การ์ดแบบกระจก */
            --tx: #ffffff; 
            --bd: rgba(255, 255, 255, 0.1); 
            --in: rgba(255, 255, 255, 0.05); 
        }
        
        /* Dark Theme ก็ให้คุมโทนเดียวกันแต่เน้นเงา */
        [data-theme="dark"] { --bg: #020305; --cd: rgba(255, 255, 255, 0.01); }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Sarabun', sans-serif; transition: 0.3s; }
        
        body { 
            background-color: var(--bg);
            /* เพิ่มแสงฟุ้งๆ ที่มุมจอแบบหน้า Loading */
            background-image: radial-gradient(at 0% 0%, rgba(235, 0, 139, 0.08) 0px, transparent 40%),
                              radial-gradient(at 100% 100%, rgba(235, 0, 139, 0.05) 0px, transparent 40%);
            color: var(--tx); 
            padding: 40px 15px; 
            line-height: 1.6;
            min-height: 100vh;
        }
        
        /* การ์ดแบบ Glassmorphism นวลตาที่สุด */
        .card { 
            background: var(--cd); 
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            max-width: 700px; 
            margin: auto; 
            border-radius: 30px; 
            border: 1px solid rgba(255, 255, 255, 0.08);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5); 
            padding: 40px; 
        }

        .h-title { 
            font-size: 1.8rem; font-weight: 800; color: #fff; 
            text-align: center; margin-bottom: 35px; letter-spacing: 2px;
            text-shadow: 0 0 15px rgba(235, 0, 139, 0.5);
        }
        
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .full { grid-column: span 2; }
        
        @media (max-width: 600px) {
            body { padding: 20px 10px; }
            .card { padding: 25px 20px; border-radius: 20px; }
            .grid { grid-template-columns: 1fr; gap: 15px; }
            .full { grid-column: span 1; }
            input, select, .btn { height: 52px; }
        }
        
        /* ปรับสี Label ให้เป็นสีขาวนวลแบบมนุษย์ชอบ */
        label { font-weight: 400; font-size: 0.85rem; display: block; margin-bottom: 10px; color: #cbd5e1; letter-spacing: 0.5px; }
        
        /* ช่อง Input แบบ Dark นวลๆ */
        input, select { 
            width: 100%; padding: 12px 18px; border: 1px solid var(--bd); border-radius: 15px; 
            background: var(--in); color: #fff; outline: none; font-size: 0.95rem;
        }
        input:focus, select:focus { 
            border-color: var(--pk); 
            background: rgba(235, 0, 139, 0.05); 
            box-shadow: 0 0 0 4px rgba(235, 0, 139, 0.15); 
        }
        
        /* กล่องการศึกษาแบบมีเส้นเน้น */
        #eduBox { 
            display: none; background: rgba(255,255,255,0.02); padding: 25px; border-radius: 20px; 
            border: 1px dashed rgba(235, 0, 139, 0.4); grid-column: span 2; margin: 10px 0 20px 0;
        }
        
        .btn-r { display: flex; gap: 15px; margin-top: 30px; }
        .btn { 
            flex: 1; padding: 15px; border-radius: 15px; font-weight: 600; border: none; 
            cursor: pointer; text-align: center; text-decoration: none; font-size: 1rem; 
            display: flex; align-items: center; justify-content: center; gap: 10px; 
        }
        
        /* ปุ่มบันทึกสีชมพูเรืองแสง */
        .sv { 
            background: var(--pk); color: #fff; 
            box-shadow: 0 8px 20px rgba(235, 0, 139, 0.3); 
        }
        .cc { background: rgba(255, 255, 255, 0.05); color: #94a3b8; border: 1px solid rgba(255,255,255,0.05); }
        
        .btn:hover { transform: translateY(-3px); opacity: 1; filter: brightness(1.1); }
        
        /* ปุ่มเปลี่ยนโหมด */
        .tgl { 
            position: fixed; top: 20px; right: 20px; cursor: pointer; color: var(--pk); 
            font-size: 1.2rem; z-index: 100; background: rgba(255,255,255,0.05); 
            width: 45px; height: 45px; display: flex; align-items: center; 
            justify-content: center; border-radius: 12px; backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
        }
    </style>
</head>
<body>

<div class="tgl" onclick="setT()"><i class="fa-solid fa-circle-half-stroke"></i></div>

<div class="card">
    <div class="h-title">บันทึกข้อมูลลูกค้า (KYC)</div>
    
    <form th:action="@{/customers/save}" th:object="${customer}" method="post" onsubmit="return val()">
        <input type="hidden" th:field="*{id}">
        
        <div class="grid">
            <div class="full">
                <label>ชื่อ-นามสกุล</label>
                <input type="text" th:field="*{name}" required id="nm" placeholder="ระบุชื่อและนามสกุล" oninput="this.value=this.value.replace(/[0-9]/g,'')">
            </div>
            
            <div><label>ชื่อเล่น</label><input type="text" th:field="*{nickname}" placeholder="ระบุชื่อเล่น"></div>
            <div><label>วันเดือนปีเกิด</label><input type="date" th:field="*{birthDate}" required></div>
            
            <div class="full"><label>ที่อยู่ปัจจุบัน</label><input type="text" th:field="*{houseNo}" placeholder="เลขที่บ้าน, หมู่บ้าน/อาคาร, ถนน"></div>
            
            <div><label>จังหวัด</label><input type="text" th:field="*{province}" placeholder="เช่น กรุงเทพฯ"></div>
            <div>
                <label>อาชีพ</label>
                <select th:field="*{occupation}" id="occ" onchange="upd()">
                    <option value="พนักงานบริษัท">พนักงานบริษัท</option>
                    <option value="ธุรกิจส่วนตัว">ธุรกิจส่วนตัว/ค้าขาย</option>
                    <option value="ข้าราชการ">ข้าราชการ/รัฐวิสาหกิจ</option>
                    <option value="กำลังศึกษา">นักเรียน/นักศึกษา</option>
                    <option value="รับจ้างทั่วไป">รับจ้างทั่วไป</option>
                    <option value="อื่นๆ">อื่นๆ</option>
                </select>
            </div>
            
            <div id="eduBox">
                <div class="grid" style="padding:0; margin:0; gap:15px;">
                    <div>
                        <label>ระดับการศึกษา</label>
                        <select th:field="*{education}">
                            <option value="อนุบาล">อนุบาล</option>
                            <option value="ประถมศึกษา">ประถมศึกษา</option>
                            <option value="มัธยมศึกษาตอนต้น">มัธยมศึกษาตอนต้น</option>
                            <option value="มัธยมศึกษาตอนปลาย">มัธยมศึกษาตอนปลาย</option>
                            <option value="ปวช.">ปวช.</option>
                            <option value="ปวส.">ปวส.</option>
                            <option value="อนุปริญญา">อนุปริญญา</option>
                            <option value="ปริญญาตรี">ปริญญาตรี</option>
                            <option value="ปริญญาโท">ปริญญาโท</option>
                            <option value="ปริญญาเอก">ปริญญาเอก</option>
                        </select>
                    </div>
                    <div>
                        <label>ชั้นปี/ระดับ</label>
                        <input type="text" th:field="*{educationYear}" placeholder="เช่น ปี 2 หรือ ม.5">
                    </div>
                    <div class="full"><label>คณะ / สาขาวิชา</label><input type="text" th:field="*{major}" placeholder="ระบุคณะหรือสายการเรียน"></div>
                </div>
            </div>
            
            <div class="full"><label>สถานที่ทำงาน / สถาบันการศึกษา</label><input type="text" th:field="*{workPlace}" placeholder="ชื่อบริษัทหรือชื่อโรงเรียน/มหาวิทยาลัย"></div>
            
            <div><label>โรคประจำตัว</label><input type="text" th:field="*{disease}" placeholder="ไม่มีให้เว้นว่าง"></div>
            <div><label>แพ้ยา / แพ้อาหาร</label><input type="text" th:field="*{allergy}" placeholder="ไม่มีให้เว้นว่าง"></div>
        </div>

        <div class="btn-r">
            <a th:href="@{/}" class="btn cc">ยกเลิก</a>
            <button type="submit" class="btn sv">
                <i class="fa-solid fa-save"></i> บันทึกข้อมูล
            </button>
        </div>
    </form>
</div>

<script>
    // [Script เดิมของพี่ กุไม่แตะเลย]
    const setT = () => {
        const t = document.documentElement.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
        document.documentElement.setAttribute('data-theme', t);
        localStorage.setItem('theme', t);
    };
    document.documentElement.setAttribute('data-theme', localStorage.getItem('theme') || 'light');

    function upd() { 
        const occVal = document.getElementById('occ').value;
        const eduBox = document.getElementById('eduBox');
        if (occVal === 'กำลังศึกษา') {
            eduBox.style.display = 'grid';
        } else {
            eduBox.style.display = 'none';
        }
    }

    function val() { 
        if(/[\d]/.test(document.getElementById('nm').value)){ 
            alert('❌ ชื่อ-นามสกุล ห้ามใส่ตัวเลขครับ!'); 
            return false; 
        } 
        return true; 
    }

    window.onload = upd;
</script>
</body>
</html>